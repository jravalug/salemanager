{% extends "base.html" %}
{% block content %}
  <h2>Gesti√≥n de Productos - {{ business.name }}</h2>
  <!-- Formulario para agregar un nuevo producto -->
  <form method="post"
        action="{{ url_for('main.products', business_id=business.id) }}">
    <h3>Agregar Nuevo Producto</h3>
    <label for="name">Nombre:</label>
    <input type="text" id="name" name="name" required />
    <label for="price">Precio:</label>
    <input type="number" step="0.01" id="price" name="price" required />
    <button type="submit">Agregar Producto</button>
  </form>
  <!-- Listado de productos -->
  <h3>Listado de Productos</h3>
  <table>
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Precio</th>
      <th>Acciones</th>
    </tr>
    {% for product in products %}
      <tr>
        <td>{{ product.id }}</td>
        <td>{{ product.name }}</td>
        <td>${{ "%.2f"|format(product.price) }}</td>
        <td>
          <!-- Formulario para modificar un producto -->
          <form method="post"
                action="{{ url_for('main.update_product', business_id=business.id, product_id=product.id) }}">
            <input type="text" name="name" value="{{ product.name }}" required />
            <input type="number"
                   step="0.01"
                   name="price"
                   value="{{ product.price }}"
                   required />
            <button type="submit">Actualizar</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </table>
  <a href="{{ url_for('main.business_dashboard', business_id=business.id) }}">Regresar al Dashboard</a>
{% endblock content %}
